import { Buffer } from "buffer/";
import { ModuleReference } from "@concordium/web-sdk";
import {
  Cis2ContractInfo,
  ContractInfo,
} from "./models/ConcordiumContractClient";

/**
 * Contract Address for Marketplace. You should specify your contract's index when you initialized it.
 */
export const MARKET_CONTRACT_ADDRESS = {
  index: BigInt(3913),
  subindex: BigInt(0),
};

/**
 * Marketplace Contract Schema.
 * Serialization code depends on this Schema. Any changes to the schema should have a corresponding change in MarketplaceDeserialzer.ts code.
 */
// Module Reference and Contract Schema for the Marketplace Contract
// Both module ref and the contract schema should be changed after a new contract deployed (if there are changes)
const MARKET_CONTRACT_SCHEMA =
  "FFFF03010000000A0000004D61726B65742D4E465401001400010000000A000000636F6D6D697373696F6E03030000000300000061646400140005000000140000006E66745F636F6E74726163745F616464726573730C08000000746F6B656E5F69641D000500000070726963650A07000000726F79616C747903080000007175616E746974791B25000000040000006C69737401140101000000100114000700000008000000746F6B656E5F69641D0008000000636F6E74726163740C0500000070726963650A050000006F776E65720B07000000726F79616C7479030D0000007072696D6172795F6F776E65720B080000007175616E746974791B25000000080000007472616E7366657200140005000000140000006E66745F636F6E74726163745F616464726573730C08000000746F6B656E5F69641D0002000000746F0B050000006F776E65720B080000007175616E746974791B250000000115010000000F0000005175616E7469747955706461746564010100000014000700000008000000746F6B656E5F69641D0008000000636F6E74726163740C0500000070726963650A050000006F776E65720B07000000726F79616C7479030D0000007072696D6172795F6F776E65720B080000007175616E746974791B25000000";

export const MARKETPLACE_CONTRACT_INFO: ContractInfo = {
  contractName: "Market-NFT",
  schemaBuffer: Buffer.from(MARKET_CONTRACT_SCHEMA, "hex"),
  moduleRef: new ModuleReference(
    "247a7ac6efd2e46f72fd18741a6d1a0254ec14f95639df37079a576b2033873e"
  ),
};
// Module Reference and Contract Schema for the CIS2-Multi
// Both module ref and the contract schema should be changed after a new contract deployed (if there are changes)
const MULTI_CONTRACT_MODULE_REF =
  "83b372c9ef9c5053746a3edefaeea96e45757dd6936f50650dac63dbcdf9505f";
const MULTI_CONTRACT_SCHEMA =
  "FFFF03010000000A000000434953322D4D756C7469000A0000000900000062616C616E63654F6606100114000200000008000000746F6B656E5F69641D0007000000616464726573731502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C10011B2500000015040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E74656402040000006D696E7404140002000000050000006F776E65721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C06000000746F6B656E7312021D000F1400020000000300000075726C1601040000006861736816011B2500000015040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E746564020F0000006F6E526563656976696E67434953320315040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E746564020A0000006F70657261746F724F66061001140002000000050000006F776E65721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C07000000616464726573731502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C10010115040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E746564020F000000736574496D706C656D656E746F72730414000200000002000000696416000C000000696D706C656D656E746F727310020C15040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E7465640208000000737570706F727473061001160010011503000000090000004E6F537570706F72740207000000537570706F72740209000000537570706F72744279010100000010000C15040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E746564020D000000746F6B656E4D657461646174610610011D0010011400020000000300000075726C160104000000686173681502000000040000004E6F6E650204000000536F6D65010100000013200000000215040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E74656402080000007472616E7366657204100114000500000008000000746F6B656E5F69641D0006000000616D6F756E741B250000000400000066726F6D1502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C02000000746F1502000000070000004163636F756E7401010000000B08000000436F6E747261637401020000000C160104000000646174611D0115040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E746564020E0000007570646174654F70657261746F720410011400020000000600000075706461746515020000000600000052656D6F7665020300000041646402080000006F70657261746F721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C15040000000E000000496E76616C6964546F6B656E49640211000000496E73756666696369656E7446756E6473020C000000556E617574686F72697A65640206000000437573746F6D010100000015070000000B0000005061727365506172616D7302070000004C6F6746756C6C020C0000004C6F674D616C666F726D65640213000000496E76616C6964436F6E74726163744E616D65020C000000436F6E74726163744F6E6C790213000000496E766F6B65436F6E74726163744572726F720212000000546F6B656E416C72656164794D696E7465640204000000766965770114000200000005000000737461746510020F1502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C1400020000000800000062616C616E63657310020F1D001B25000000090000006F70657261746F727310021502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C06000000746F6B656E7310021D00011F05000000FB0D000000546F6B656E4D65746164617461000200000008000000746F6B656E5F69641D000C0000006D657461646174615F75726C1400020000000300000075726C160104000000686173681502000000040000004E6F6E650204000000536F6D650101000000132000000002FC0E0000005570646174654F70657261746F7200030000000600000075706461746515020000000600000052656D6F7665020300000041646402050000006F776E65721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C080000006F70657261746F721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000CFD040000004275726E000300000008000000746F6B656E5F69641D0006000000616D6F756E741B25000000050000006F776E65721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000CFE040000004D696E74000300000008000000746F6B656E5F69641D0006000000616D6F756E741B25000000050000006F776E65721502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000CFF080000005472616E73666572000400000008000000746F6B656E5F69641D0006000000616D6F756E741B250000000400000066726F6D1502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C02000000746F1502000000070000004163636F756E7401010000000B08000000436F6E747261637401010000000C";
export const CIS2_MULTI_CONTRACT_INFO: Cis2ContractInfo = {
  contractName: "CIS2-Multi",
  moduleRef: new ModuleReference(MULTI_CONTRACT_MODULE_REF),
  schemaBuffer: Buffer.from(MULTI_CONTRACT_SCHEMA, "hex"),
  tokenIdByteSize: 1,
};
export const IPFS_GATEWAY_URL = "https://gateway.pinata.cloud/ipfs/";

// Default value of the new marketplace contract init flag is false.
// It needs to be set as true in order to allow to create a new marketplace contract instance
export const CREATE_NEW_MARKETPLACE = true;

// Marketplace has the minting tool as a subtool, set true if the minting tool is required instead of the marketplace.
export const MINTING_UI_ONLY = false;

export const tokenIdToNftImageFileName = (
  originalFileName: string,
  tokenId: string
) => {
  const ext = originalFileName.substring(originalFileName.lastIndexOf("."));

  return `nft_${tokenId}.${ext}`;
};
export const tokenIdToNftMetadataFileName = (tokenId: string) => {
  return `nft_${tokenId}_metadata.json`;
};

// Wert Config Options
export const WERT_PRIVATE_KEY =
  "0x57466afb5491ee372b3b30d82ef7e7a0583c9e36aef0f02435bd164fe172b1d3";
export const WERT_PARTNER_ID = "01GW6YMK3WN8QY8E8MTKP6MHXX";
export const WERT_NETWORK = "testnet";
export const WERT_ORIGIN = "https://sandbox.wert.io";

// Web Backend Config Options
export const WEB_URL = "http://localhost:3001";
export const WEB_TOKENS_LIST_URL = `${WEB_URL}/market/index/:index/subindex/:subindex/tokens`;
export const WEB_AUCTIONS_LIVE_LIST_URL = `${WEB_URL}/auctions/live`;
export const WEB_BLOCK_HEIGHT_URL = `${WEB_URL}/system/block-height`;

// Cis2 Auction Config Options
const AUCTION_CONTRACT_SCHEMA = "ffff03010000000700000061756374696f6e010014000400000003000000656e640d0500000073746172740d0d0000006d696e696d756d5f7261697365051300000070617274696369706174696f6e5f746f6b656e1502000000040000004e6f6e650204000000536f6d65010100000014000200000008000000636f6e74726163740c08000000746f6b656e5f69641d0006000000030000006269640315090000000b0000004f6e6c794163636f756e74021200000042696442656c6f7743757272656e74426964021400000042696442656c6f774d696e696d756d5261697365020a000000426964546f6f4c617465020b000000426964546f6f4561726c79020e00000041756374696f6e4e6f744f70656e020f0000004e6f74415061727469636970616e7402080000004c6f674572726f72020d0000005472616e736665724572726f72020600000063616e426964050a1505000000090000004e6f4e6f744f70656e020c0000004e6f4e6f745374617274656402070000004e6f456e64656402110000004e6f4e6f74415061727469636970616e7402110000004e6f436f6e7472616374416464726573730214000000636f6e766572744575726f43656e74546f43636406050a15010000000b0000005061727365506172616d73020800000066696e616c697a650315040000001200000041756374696f6e5374696c6c416374697665020e00000041756374696f6e4e6f744f70656e0211000000436973325472616e736665724572726f7202080000004c6f674572726f72020f0000006f6e526563656976696e67434953320315080000000b0000005061727365506172616d73020c000000436f6e74726163744f6e6c79020b0000004f6e6c794163636f756e74020c000000556e417574686f72697a6564021900000041756374696f6e416c7265616479496e697469616c697a656402080000004c6f674572726f720219000000496e76616c696450617274696369706174696f6e546f6b656e020d0000005075626c696341756374696f6e021c0000006f6e526563656976696e6750617274696369706174696f6e434953320315080000000b0000005061727365506172616d73020c000000436f6e74726163744f6e6c79020b0000004f6e6c794163636f756e74020c000000556e417574686f72697a6564021900000041756374696f6e416c7265616479496e697469616c697a656402080000004c6f674572726f720219000000496e76616c696450617274696369706174696f6e546f6b656e020d0000005075626c696341756374696f6e020115020000000e00000041756374696f6e5570646174656401010000001400070000000d00000061756374696f6e5f737461746515030000000e0000004e6f74496e697469616c697a6564020a0000004e6f74536f6c64596574010100000014000300000008000000636f6e74726163740c08000000746f6b656e5f69641d0006000000616d6f756e741b2500000004000000536f6c6401010000000b0e000000686967686573745f6269646465721502000000040000004e6f6e650204000000536f6d6501010000000b0d0000006d696e696d756d5f72616973650503000000656e640d0500000073746172740d1300000070617274696369706174696f6e5f746f6b656e1502000000040000004e6f6e650204000000536f6d65010100000014000200000008000000636f6e74726163740c08000000746f6b656e5f69641d000b000000686967686573745f62696405100000005061727469636970616e74416464656401010000000b";

export const AUCTION_CONTRACT_INFO: ContractInfo = {
  contractName: "auction",
  schemaBuffer: Buffer.from(AUCTION_CONTRACT_SCHEMA, "hex"),
  moduleRef: new ModuleReference(
    "cc68639cd6fbb4e0af22c675c06ecbb4ebcdc44318898a89f055586c12099c6d"
  ),
};
